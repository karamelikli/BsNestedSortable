/**
 * Bootstrap Nested sortable tree.
 *
 * @package BsNestedSortable
 * @copyright MIT
 * @license https://github.com/karamelikli/BsNestedSortable/blob/main/LICENSE
 * @version 1.4.2
 * @link https://github.com/karamelikli/BsNestedSortable
 * minified by https://github.com/Skalman/UglifyJS-online
 */
 

function BsNestedSortable(){var initialSerilized,UInestedSortable={options:{depth:30,treeSelector:"#tree",branchSelector:".tree-branch",branchPathSelector:".branch-path",dragHandlerSelector:".moveAble",placeholderName:"sortable-placeholder",childrenBusSelector:".children-bus",collapseChildren:".collapseChildren",levelPrefix:"branch-level",maxHeight:40,minHeight:10,insertNewButton:'<button type="button" class="btn btn-primary btn-lg btn-block w-100">{insertText}</button>',imagesUrlPrefix:"",icons:{remove:'<i class="far fa-trash-alt"></i>',edit:'<i class="far fa-edit"></i>',add:'<i class="far fa-plus-square"></i>',expand:'<i class="fas fa-plus"></i>',collapse:'<i class="fas fa-minus"></i>'},modal:{id:"#myModal",ModalDelete:"#myModalDelete",name:"#CatName",description:"#CatDescId",image:"#image"},maxLevel:3,rootID:0,dataAttributes:{id:"id",parent:"parent",title:"title"},dataKeys:{id:"id",parent:"parent_id",title:"title",description:"description",image:"img",order:"order"}},language:{createTheFirstBranch:"Insert New Branch",newItem:"New Item",editBranch:"Edit Branch",addBranch:"Add a new child",removeBranch:"Remove Branch"},serializeOption:{serializeON:!1,method:"JSON",call:"html",outPuts:{catObj:"#catObj",parentArr:"#parentArr",childrenArr:"#childrenArr",Hierarchy:"#hierarchy",minHierarchy:"#minHierarchy",allParentsArr:"#allParentsArr",allChildrenArr:"#allChildrenArr"}},eventsOptions:{onComplete:async function(){return!0},onDelete:async function(){return!0},onEdit:async function(){return!0},onAdd:async function(){return!0},excludedObjElms:[]},run(){this.jQuerySupplements(),this.initSorting(),!0===this.serializeOption.serializeON&&(initialSerilized=this.serialization().catObj)},prepareData(e){const{options:{dataKeys:{id:t,parent:a,title:n,description:i,image:r,order:l},rootID:s,maxLevel:o},language:c}=UInestedSortable;let h=[],d=[];const p=function(n){let i=e.filter(e=>e[a]==n);if(i.sort(function(e,t){return e[l]-t[l]}),i.length>0){let n=0;$.each(i,function(i,r){const c=r[t],g=r[a];let u=e.find(e=>e[t]==c),$=1;if(g!=s){let e=h.filter(e=>e[t]==g)[0];($=e.level+1)>o&&($=o,u[a]=e[a])}d[c]=$,u.level=$;const m=r[l];null==m?u[l]=++n:(u[l]=m,++n),h=h.concat(u),e.filter(e=>e[a]==c).length>0&&p(c)})}else{let a=1;n!=s&&(a=d[n]+1),d[ThisId]=a;let i=e.find(e=>e[t]==n);i.level=a,h=h.concat(i)}};return Object.keys(e).forEach(function(t,l){void 0===e[t][i]&&(e[t][i]=""),void 0===e[t][r]&&(e[t][r]=""),void 0===e[t][n]&&(e[t][n]=c.newItem),void 0===e[t][a]&&(e[t][a]=s)}),function(){const n=e;$.each(n,function(n,i){const r=e.filter(e=>e[t]==i[a]);i[a]!=s&&0==Object.keys(r).length&&(e[n][a]=s)})}(),p(s),h},MakeContents(e){const{options:{treeSelector:t,insertNewButton:a,rootID:n,modal:i},language:r}=UInestedSortable;if(!(e.length<1||"number"!=typeof e.length))return this.prepareData(e).map(this.createBranch);{const e=a.replace(/\{insertText\}/,r.createTheFirstBranch);$(t).before($(e).addClass("emptyButton").click(function(){$("#parentOfThis").val(n),$("#IsAddItem").val(!0),$(i.id).modal("show")}))}},html(e,t){$(e).html(this.MakeContents(t)),this.run()},getDistance(e,t){const a=e.getBoundingClientRect(),n=t.getBoundingClientRect();return{distanceX:Math.floor(Math.abs(a.left+a.width/2-(n.left+n.width/2))),distanceY:Math.floor(Math.abs(a.top+a.height/2-(n.top+n.height/2)))}},getSerialDiff(){const{options:{dataKeys:{id:e,parent:t,title:a,image:n,description:i}},serializeOption:{serializeON:r},eventsOptions:{excludedObjElms:l},serialize:s}=UInestedSortable;if(0==r)return;let o=initialSerilized,c=s().catObj,h=[],d=[],p=[];return o!=c&&(o.map(function(t){const a=c.filter(a=>a[e]==t[e]);if(a.length>0){const e=a[0];for(var n in t){if(void 0===t[n]||void 0===e[n]){p.push("undefined"==t[n]?e:t);break}if(t[n]!==e[n]&&!l.includes(n)){if(!Array.isArray(t[n])){p.push(e);break}if(JSON.stringify(t[n].sort())!==JSON.stringify(e[n].sort())){p.push(e);break}}}}else h.push(t)}),c.map(function(t){0==o.filter(a=>a[e]==t[e]).length&&d.push(t)}),{deleted:h,added:d,modified:p,theLastSerializ:c})},serialization(){const{options:{dataAttributes:e,treeSelector:t,rootID:a,dataKeys:n}}=UInestedSortable,i={},r={},l={},s={[a]:[]},o=[],c=function(t,a){let n=t.getParent(),i=n.attr("data-"+e.id);void 0!==i&&(l[a].push(i),void 0!==s[i]?s[i].push(a):Object.assign(s,{[i]:[a]})),n.length&&n.getParent().length&&c(n,a)},h=function(e,t="typeof"){return"typeof"==t?void 0===e?[]:e:"text"==t?void 0===e?"":e:void 0};$(t+" li").each(function(){theID=$(this).attr("data-"+e.id),Object.assign(l,{[theID]:[a]}),s[a].push(theID);const t=$(this).attr("data-"+e.parent);Object.assign(r,{[theID]:[t]}),void 0===i[t]?Object.assign(i,{[t]:[theID]}):i[t].push(theID),c($(this),theID)}),o[a]={[n.id]:a,[n.parent]:"",level:0,[n.order]:0,[n.title]:"Root",parents:[],children:[],[n.image]:"",[n.description]:""},$(t+" li").each(function(){theID=$(this).attr("data-"+e.id),o[theID]={[n.id]:theID,[n.parent]:$(this).attr("data-"+e.parent),level:$(this).attr("data-level"),[n.order]:$(this).attr("data-order"),[n.title]:h($(this).find(".branch-title").html(),"text"),[n.image]:h($(this).find(".branch-imagePath").text(),"text"),[n.description]:h($(this).find(".desc.d-none").html(),"text"),parents:h(l[theID]),children:h(s[theID])}});const d=function(e){const t={[n.id]:e,[n.title]:o[e].text,[n.parent]:o[e].parent,parents:o[e].parents,level:o[e].level,[n.order]:o[e].order,[n.image]:o[e].image,[n.description]:o[e].description,children:[]},a={[n.id]:e,[n.title]:o[e].text};return void 0!==i[e]&&i[e].length&&$.each(i[e],function(e,n){const i=d(n);t.children.push(i.Hierarchy),void 0===a.children&&(a.children=[]),a.children.push(i.minHierarchy)}),{Hierarchy:t,minHierarchy:a}},p=d(a),g=p.Hierarchy,u=p.minHierarchy;return{catObj:o,parentArr:r,childrenArr:i,minHierarchy:u,Hierarchy:g,allParentsArr:l,allChildrenArr:s}},serialize(){const{serializeOption:{method:method,outPuts:outPuts,serializeON:serializeON,call:call},serialization:serialization}=UInestedSortable;if(0==serializeON)return;const serobjs=serialization();if(void 0!==outPuts)for(const[key,value]of Object.entries(outPuts))for(const[key2,value2]of Object.entries(serobjs))if(key==key2)switch(method){case"JSON":const newOutput=JSON.stringify(Object.assign({},value2));"html"==call&&$(value).html(newOutput),"val"==call&&$(value).val(newOutput),"text"==call&&$(value).text(newOutput);break;case"console":console.log(value),console.log(value2);break;case"alert":alert(value),alert(value2);break;case"asVar":const tempVar=value2;eval("globalThis."+key+"=tempVar")}return serobjs},cleanSelector:e=>e.replace(/^[\.#]/g,""),getInstance(){return this},getTreeEdge:()=>$(UInestedSortable.options.treeSelector).offset().left,pxToNumber:e=>new RegExp("px$","i").test(e)?1*e.slice(0,-2):0,numberToPx:e=>`${e}px`,generateNewId(){const{options:{treeSelector:e,branchSelector:t,dataAttributes:{id:a}}}=UInestedSortable,n=[];return $(e+" "+t).map(function(){const e=$(this).attr("data-"+a);Number(e)==e&&n.push(Number(e))}),0==n.length?1:Math.max.apply(null,n)+1},createBranch(e){const{options:{branchSelector:t,branchPathSelector:a,childrenBusSelector:n,levelPrefix:i,collapseChildren:r,icons:{add:l,edit:s,remove:o},dataKeys:{id:c,parent:h,order:d,title:p,description:g,image:u},dataAttributes:{id:$,parent:m},imagesUrlPrefix:f},cleanSelector:v,language:b}=UInestedSortable,{[c]:S,level:I,[d]:x,[h]:B,[p]:y,[u]:O}=e;let{[g]:D}=e,C="";D?(C=D.replace(/(<([^>]+)>)/gi,""),D=D.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")):C=D="";const L=O?"<img src='"+f+O+"' />":"";return`\n                    <li class="list-group-item ${v(t)} ${i}-${I}" data-${$}="${S}" data-${m}="${B}" data-order="${x}" data-level="${I}">            \n                                    <span class="${v(a)}"></span>\n                        <div class=" moveAble  branch-wrapper" >\n                            <div   class="branch-leftdiv">                             \n                                <button type="button"  class="button ${v(r)} " ></button>                           \n                                <div  class="branch-leftdivImage">${L}</div>\n                                <div class="branch-imagePath d-none" style="display:none"  >${O}</div>\n                                <span class="branch-title">${y}</span> \n                            </div>   \n                            <div class="branch-desc">${C}</div>\n                            <div class="desc d-none" style="display:none"  >${D}</div>\n                            <div class ="iconsDiv">\n                                <button type="button" class="button edit-Icon" title="${b.editBranch}">${s}</button>\n                                <button type="button" class="button add-Icon" title="${b.addBranch}">${l}</button>\n                                <button type="button" class="button delete-Icon" title="${b.removeBranch}">${o}</button>\n                            </div>                  \n                        </div>             \n                        <div class="${v(n)}"></div>\n                    </li>\n                `},jQuerySupplements(){const{options:e}=UInestedSortable,{levelPrefix:t}=e;$.fn.extend({getBranchLevel(){if(0===$(this).length)return 0;const{depth:t}=e,a=$(this).css("margin-left");return/(px)|(em)|(rem)$/i.test(a)?Math.floor(a.slice(0,-2)/t)+1:Math.floor(a/t)+1},updateBranchLevel(e,a=null){return this.each(function(){a=a||$(this).getBranchLevel()||1,$(this).removeClass(t+"-"+a).addClass(t+"-"+e).data("level",e).attr("data-level",e)})},shiftBranchLevel(e){return this.each(function(){let a=$(this).getBranchLevel()||1,n=a+e;$(this).removeClass(t+"-"+a).addClass(t+"-"+n).data("level",n).attr("data-level",n)})},getParent(){const{options:{branchSelector:e}}=UInestedSortable,t=$(this).getBranchLevel()||1;let a=$(this).prev(e);for(;a.length&&a.getBranchLevel()>=t;)a=a.prev(e);return a},getRootChild(){const{options:{branchSelector:e,treeSelector:t,levelPrefix:a}}=UInestedSortable;return $(t).children(`${e}.${a}-1`)},getLastChild(){const e=$(this).getChildren(),t=$(this).getDescendants(),a=t.length>e.length?t.last():e.last();return a.length?a:$()},getChildren(){const{options:{branchSelector:e}}=UInestedSortable;let t=$();return this.each(function(){let a=$(this).getBranchLevel()||1,n=$(this).next(e);for(;n.length&&n.getBranchLevel()>a;)n.getBranchLevel()===a+1&&(t=t.add(n)),n=n.next(e)}),t},getDescendants(){const{options:{branchSelector:e}}=UInestedSortable;let t=$();return this.each(function(){let a=$(this).getBranchLevel()||1,n=$(this).next(e);for(;n.length&&n.getBranchLevel()>a;)t=t.add(n),n=n.next(e)}),t},nextBranch(){return $(this).next()},prevBranch(){return $(this).prev()},nextSibling(){const{options:{branchSelector:e}}=UInestedSortable;let t=$(this).getBranchLevel()||1,a=$(this).next(e),n=a.getBranchLevel();for(;a.length&&n>t;)n=(a=a.next(e)).getBranchLevel();return+n==+t?a:$()},prevSibling(){const{options:{branchSelector:e}}=UInestedSortable;let t=$(this).getBranchLevel()||1,a=$(this).prev(e),n=a.getBranchLevel();for(;a.length&&n>t;)n=(a=a.prev(e)).getBranchLevel();return n===t?a:$()},getLastSibling(){let e=$(this).nextSibling();if(!e.length)return $(this);for(;e.length;){const t=e.nextSibling();if(!t.length)return e;e=t}},getSiblings(e=null){const{options:{treeSelector:t,branchSelector:a}}=UInestedSortable;e=e||$(this).getBranchLevel();let n=[],i=$(`${t} > ${a}`),r=this;return i.length&&i.each(function(){+$(this).getBranchLevel()==+e&&r[0]!==$(this)[0]&&n.push($(this))}),n},addIcons(){const{options:{branchSelector:e,collapseChildren:t,icons:{collapse:a}}}=UInestedSortable;$(e).each(function(){$(this).getChildren().length&&$(this).find(t).html(a)})},calculateSiblingDistances(){const{options:{maxHeight:e,minHeight:t,branchSelector:a,branchPathSelector:n},getDistance:i}=UInestedSortable;$(a).each(function(){const r=$(this).getBranchLevel()||1;if($(this).find(n).show(),"function"==typeof $(this).nextSibling)if(r>1){const s=$(this).nextSibling();if(s.length){const a=i($(this).get(0),s.get(0));var l=$(this).getParent()?$(this).getParent():$(this).getRootChild();const r=i($(this).get(0),l.get(0));s.find(n).css("height",`${Math.max(a.distanceY+t,e)}px`),$(this).find(n).css("height",`${Math.max(r.distanceY+t,e)}px`)}else{const i=$(this).next(a),l=i.getBranchLevel()||1;i.length>0&&l>r&&i.find(n).css("height",e+"px"),i.length>0&&l<r&&($(this).prevBranch().getBranchLevel()<r&&$(this).find(n).css("height",e+t+"px"),$(this).prevBranch().getBranchLevel()==r&&$(this).find(n).css("height",e+e+"px")),$(this).prevBranch().getBranchLevel()<r&&$(this).find(n).css("height",e+t+"px")}}else $(this).find(n).hide()})},removeBranch(){const{options:{treeSelector:e,branchSelector:t},updateBranchZIndex:a}=UInestedSortable,n=$(this).closest(`${e} ${t}`);$descendants=n.getDescendants(),$descendants.each((e,t)=>{$(t).remove()}),n.remove(),a(),serialize()},collapseThis(e=!1){const{options:{treeSelector:t,branchSelector:a,icons:{collapse:n,expand:i}}}=UInestedSortable,r=$(this).closest(`${t} ${a}`),l=r.find(".collapseChildren");l.hasClass("expandIcon")?e||l.removeClass("expandIcon").addClass("collapseIcon").html(n):e||l.removeClass("collapseIcon").addClass("expandIcon").html(i);const s=r.getChildren().is(":visible");e||(s?r.attr("data-collapsed","hide"):r.attr("data-collapsed","show")),r.getChildren().each(function(){s?($(this).hide(),e||r.attr("data-visibility","hide")):($(this).show(),e||r.attr("data-visibility","show")),$(this).getChildren().length&&$(this).getChildren().is(":visible")==s&&"hide"!=$(this).attr("data-visibility")&&$(this).collapseThis(!0)})},updateCollapse(){const{options:{icons:{expand:e}}}=UInestedSortable,t=$(this).find(".collapseChildren");"hide"==$(this).attr("data-collapsed")&&t.removeClass("collapseIcon").addClass("expandIcon").html(e)}})},updateBranchZIndex(){const{options:{treeSelector:e,branchSelector:t}}=UInestedSortable,a=$(`${e} > ${t}`),n=a.length;a.length&&a.each(function(e){$(this).css("z-index",Math.max(1,n-e))})},initSorting(){const{options:e,eventsOptions:t,pxToNumber:a,numberToPx:n,updateBranchZIndex:i,serialize:r,serializeOption:l,getSerialDiff:s,generateNewId:o,createBranch:c,language:h}=UInestedSortable,{treeSelector:d,dragHandlerSelector:p,placeholderName:g,childrenBusSelector:u,branchPathSelector:m,branchSelector:f,levelPrefix:v,dataAttributes:b,collapseChildren:S,modal:I,imagesUrlPrefix:x,maxLevel:B,rootID:y,dataKeys:{id:O,parent:D,title:C,description:L,image:w}}=e;i();let z=1,N=1,P=null,A=0,j=0;$(this).addIcons(),$(document).on("click",S,function(){$(this).collapseThis(),$(this).calculateSiblingDistances()}),$(document).on("click",".delete-Icon",function(){$(I.ModalDelete+" #IdOfDelete").val($(this).parents(f).attr("data-"+b.id)),$(I.ModalDelete).modal("show")}),$(I.ModalDelete+" .Delete").on("click",async function(){const e=$(I.ModalDelete+" #IdOfDelete").val(),a=$(d+" [data-"+b.id+'="'+e+'"]'),n=a.getDescendants().length,r=initialSerilized.filter(t=>t[O]==e);if($(I.ModalDelete+" .close").click(),0==n){await t.onDelete(a,r)&&(a.remove(),$(d).calculateSiblingDistances(),i(),initialSerilized=s().theLastSerializ)}else $("#errorDesc").html("<p>This branch has childeren!</p><p><small>You have to delete this branch' childeren first.</small></p>"),$("#proceeding-error").modal("show")}),$(document).on("click",".add-Icon,.edit-Icon",function(){const e=$(this).parents(f),t=e.attr("data-"+b.id),a=$(this).hasClass("add-Icon"),n=e.find(".branch-title").text();if($("#oldNameOfBranch").val(n),!a){const t=e.find(".branch-leftdivImage img").attr("src"),a=e.find(".desc.d-none").html().replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">");$(I.name).val(n),a&&$(I.description).hasClass("summernote")?$(I.description).summernote("pasteHTML",a):$(I.description).val(a);const i=e.find(".branch-imagePath.d-none").text();$(I.image).val(i),$("#oldImgName").val(i),t&&$("#uploadedImage").html("<img style='height:2rem;width:auto;' src='"+t+"'>")}$("#parentOfThis").val(t),$("#IsAddItem").val($(this).hasClass("add-Icon")),$(I.id).modal("show")}),$(I.id+" .close").on("click",function(){$(I.name).val(""),$(I.description).val(""),$(I.image).val(""),$(I.id).modal("hide"),$("#parentOfThis ,#IsAddItem ,#oldNameOfBranch ,#oldImgName ").val(""),$("#uploadedImage").html("")}),$(I.id+" .submit").on("click",async function(){const e=$("#IsAddItem").val(),a=$("#parentOfThis").val(),n=$("*[data-"+b.id+'="'+a+'"]'),r=$(I.name).val()?$(I.name).val():h.newItem,p=$(I.description).val(),g=$("#oldImgName",I.id).val(),u=($("#oldNameOfBranch").val(),initialSerilized[a].parents),m=initialSerilized[a].children;let f=!1;if("true"==e){var v=o();const e=Math.min(B,parseInt(n.attr("data-level"))+1);$lastChild=n.getLastChild();let l={[O]:v,[D]:a,[C]:r,level:e,[L]:p,[w]:g,children:[],parents:u.push(a)},s=c(l);"object"==typeof(f=await t.onAdd(s,l))&&(f[w]&&(l={...l,...{[w]:f[w]}}),f[O]&&(l={...l,...{[O]:f[O]}}),s=c(l)),f&&($lastChild.length?$lastChild.after(s):n.length?n.after(s):($(d).html(s),$(".emptyButton").remove()),$(d).addIcons(),$(d).calculateSiblingDistances(),i())}else{const e={[O]:a,[D]:n.attr("data-"+b.parent),[C]:r,level:n.attr("data-level"),[L]:p,[w]:g,children:m,parents:u};if(l.serializeON){const t=initialSerilized.filter(e=>e[O]==a)[0];e.parents=t.parents,e.children=t.children}(f=await t.onEdit(n,e))&&(n.find(".branch-title").text(r),n.find(".desc.d-none").html(p),n.find(".branch-desc").html(p.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),f.image?(n.find(".branch-leftdivImage").html("<img src='"+x+f.image+"'>"),n.find(".branch-imagePath").text(f.image)):(n.find(".branch-leftdivImage").html(""),n.find(".branch-imagePath").text()))}f&&($(I.id+" .close").click(),initialSerilized=s().theLastSerializ)}),$(this).calculateSiblingDistances();r(),$(d).sortable({handle:p,placeholder:g,items:"> *",start(e,t){const i=t.item.getBranchLevel();t.placeholder.updateBranchLevel(i),j=t.item.index(),N=i,(P=t.item.find(u)).append(t.item.next().getDescendants());let r=P.outerHeight(),l=t.placeholder.css("margin-top");r+=r>0?a(l):0,r+=t.helper.outerHeight(),A=r,r-=2;let s=t.helper.find(f).outerWidth()-2;t.placeholder.css({height:r,width:s});const o=t.placeholder.nextBranch();o.css("margin-top",n(A)),t.placeholder.detach(),$(this).sortable("refresh"),t.item.after(t.placeholder),o.css("margin-top",0),z=i,$(`${d} ${f} ${m}`).hide()},sort(e,t){const{options:a,getTreeEdge:n}=UInestedSortable,{depth:i,maxLevel:r}=a;let l=n(),s=t.helper.offset().left,o=1,c=r,h=t.placeholder.prevBranch(),d=(h=h[0]===t.item[0]?h.prevBranch():h).getBranchLevel();c=Math.min(d+1,r);let p=1;if(t.placeholder.nextSibling().length)p=t.placeholder.getBranchLevel()||1;else{p=t.placeholder.nextBranch().getBranchLevel()||1}o=Math.max(1,p);let g=Math.max(0,s-l),u=Math.floor(g/i)+1;if(u=Math.max(o,Math.min(u,c)),(e=>{let t=e.helper.offset().top+A,a=e.placeholder.nextBranch(),n=a.offset()||0,i=a.outerHeight();return t>n.top+i/3})(t)){let e=t.placeholder.nextBranch();e.getDescendants().length&&(u=e.getBranchLevel()+1),e.after(t.placeholder),$(this).sortable("refreshPositions")}var m,f;m=t.placeholder,f=u,m.updateBranchLevel(f),z=f},change(e,t){let a=t.placeholder.prevBranch(),n=(a=a[0]===t.item[0]?a.prevBranch():a).getBranchLevel()||1;if(a.length){t.placeholder.detach();let e=a.getDescendants();e&&e.length&&(n+=1),t.placeholder.updateBranchLevel(n),a.after(t.placeholder)}},stop(e,a){$(`${f}:not(${v}-1) ${m}`).show();const n=P.children().insertAfter(a.item);P.empty(),0==a.item.next().getDescendants().length&&$(S).html(""),a.item.updateBranchLevel(z),n.shiftBranchLevel(z-N),$(this).addIcons(),i();const l=a.item.getParent();let o=y;l.length&&(o=l.data(b.id)),a.item.data(b.parent,o).attr(`data-${b.parent}`,o);let c=[];$(d+" li").each(function(){const e=$(this).attr("data-level");null==c[e]?c[e]=1:c[e]++,$(this).attr("data-order",c[e])}),r(),z===N&&j===a.item.index()||t.onComplete(a,s()),n.length>0&&(a.item.updateCollapse(),n.each(function(){$(this).updateCollapse()})),$(this).calculateSiblingDistances()}})}};return UInestedSortable}errorAlert=function(e,t){let a="";a=0===e.status?"Not connect.\n Verify Network.":404==e.status?"Requested page not found. [404]":405==e.status?"Method Not Allowed. [405]":500==e.status?"Internal Server Error [500].":"parsererror"===t?"Requested JSON parse failed.":"timeout"===t?"Time out error.":"abort"===t?"Ajax request aborted.":"Uncaught Error.\n"+jqXHR.responseText,$("#errorDesc").html(a),$("#proceeding-error").modal("show")},ajaxRequest=function(e,t,a){new Promise((t,a)=>{$.ajax({...e,...{success:function(e){t(e)},error:function(e,t){a(e,t)}}})}).then(e=>{t(e)}).catch((e,t)=>{a(e,t),errorAlert(e,t)})},jQuery.fn.BsNestedSortable=function(e){data="object"==typeof e&&e.hasOwnProperty("data")?e.data:data;const t=new BsNestedSortable;let a="";return $(this[0]).attr("id")&&(a+="#"+$(this[0]).attr("id")),$(this[0]).attr("class")&&(a+="."+$.trim($(this[0]).attr("class")).replace(/\s/gi,".")),t.options={...t.options,...{treeSelector:a}},"object"==typeof e&&(e.hasOwnProperty("options")&&("object"==typeof e.options&&e.options.hasOwnProperty("dataKeys")&&(e.options.dataKeys={...t.options.dataKeys,...e.options.dataKeys}),t.options={...t.options,...e.options}),void 0!==e.language&&(t.language={...t.language,...e.language}),void 0!==e.serializeOption&&(t.serializeOption={...t.serializeOption,...e.serializeOption,...{serializeON:!0}}),void 0!==e.eventsOptions&&(t.serializeOption={...t.serializeOption,...{serializeON:!0}},t.eventsOptions={...t.eventsOptions,...e.eventsOptions})),$(this[0]).html(t.MakeContents(data)),t.run(),this};
